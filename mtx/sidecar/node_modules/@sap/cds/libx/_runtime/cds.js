/** @type {import('../../lib')} */
const cds = require('../../lib')
module.exports = cds

/*
 * csn aspects
 */
const { any, entity, Association } = cds.builtin.classes
cds.extend(any).with(require('./common/aspects/any'))
cds.extend(Association).with(require('./common/aspects/Association'))
cds.extend(entity).with(require('./common/aspects/entity'))

/**
 * Logs a deprecation warning once per process
 *
 * @param {string} msg the deprecation warning to be logged
 */
cds._logDeprecation = function (msg) {
  if (!cds._deprecations.has(msg)) {
    cds._deprecations.add(msg)
    cds.log().warn(msg)
  }
}
Object.defineProperty(cds, '_deprecations', { value: new Set() })
